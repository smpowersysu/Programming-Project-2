#include <iostream>

using namespace std;

int factorial(int x);

int main(){
int type;

do{
    cout << "0 = exit program" << endl;
    cout << "1 = simple binary" << endl;
    cout << "2 = code 39" << endl;
    cout << "3 = code 48" << endl;
    // display choices for user

    cout << "\nWhich code do you want to decrypt? " << endl;
    cin >> type; //ask for input


        if(type == 1){ //binary
            int b; //number of bars
            int i = 0; //loop variables
            int k = 0;
            int l = 0;
            cout << "Number of bars in code (between 1 and 21): " ;
            cin >> b;
            char arraychars[b]; //barcode as w's and n's
            int arrayint[b]; //whole barcode as ints
            while (b <= 21 && b >= 1) //b is in range
            {
              for (i=0; i<b; i++)
              {
              cout << "Enter character (w for wide, n for narrow): " << endl;
              cin >> arraychars[i];
              }
              for (k=0; k<b; k++)
              {
              if (arraychars[k] == 'w')
              arrayint[k] = 1;
              else if (arraychars[k] == 'n')
              arrayint[k] = 0;
              else
              break;
              }
              for (l=0; l<k; l++)
                cout << arrayint[l] ;
              break; //exits loop
            } //while loop
            return 0;
        }

        else if(type == 2){
            char a[9];
            for (int i=0;i<9;i++) //Puts w or n into char array
            {
            cout << "Enter w or n: ";
            cin >> a[i];
            }
            int x[3],z=0;
            for(int i=0;i<9;i++,z++)
            {
            if(a[i]=='w')
            x[z]=8-i;//Fills int array with values 8-0 depending on w position
            else
            z=z-1;//Restricts making int array bigger than 3
            }
            if(z!=3){//If z is not 3 too many or few wide bars entered
            cout << "The number of wide bars is invalid";
            return(1);}
            int k=4;//k runs from 4-2
            int q=0;//This is the decoded sum
            for(int i=0;i<3;i++,k--){//Sums
            q=q+factorial(x[i])/(factorial(k)*factorial(x[i]-k));}
            cout <<"\n" << q;
            return 0;
            }
        else if(type == 3){
            //placeholder
        }

    else{
        cout << "Invalid input." << endl;
        }
  }while(type != 0); //repeat program until user inputs "0"

return 0;
}

int factorial(int x){
int y = x;
for(int n = 1; n < y; n++)
{
x = x*(y - n);
}
if(x <= 0)
x = 1;
return x;
}
